<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LYN CHAT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
            color: #2d3748;
            overflow-x: hidden;
            background-image: url('https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-attachment: fixed;
        }
        
        .logo-container {
            border: 2px solid #4a7c59;
            box-shadow: 0 0 10px rgba(74, 124, 89, 0.3);
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        .lyn-font {
            font-family: 'Playfair Display', serif;
            color: #2d3748;
            font-weight: bold;
        }
        
        .lyn-box {
            border: 2px solid #4a7c59;
            box-shadow: 0 0 15px rgba(74, 124, 89, 0.2);
            position: relative;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.85);
        }
        
        .lyn-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1516214104703-d870798883c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: 300px;
            opacity: 0.1;
            z-index: -1;
        }
        
        .flower-decoration {
            position: absolute;
            width: 80px;
            height: 80px;
            background-image: url('https://www.freepnglogos.com/uploads/flower-png/flower-png-transparent-image-pngpix-0.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.8;
        }
        
        .flower-top-left {
            top: -20px;
            left: -20px;
            transform: rotate(-15deg);
        }
        
        .flower-top-right {
            top: -20px;
            right: -20px;
            transform: rotate(15deg);
        }
        
        .flower-bottom-left {
            bottom: -20px;
            left: -20px;
            transform: rotate(15deg);
        }
        
        .flower-bottom-right {
            bottom: -20px;
            right: -20px;
            transform: rotate(-15deg);
        }
        
        .lyn-input {
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid #4a7c59;
            color: #2d3748;
            padding: 10px;
            font-family: 'Roboto', sans-serif;
            font-size: 1.25rem;
        }
        
        .lyn-input:focus {
            outline: none;
            box-shadow: 0 0 8px rgba(74, 124, 89, 0.3);
        }
        
        .lyn-btn {
            background: linear-gradient(45deg, #4a7c59, #6b9d7a);
            color: white;
            border: 1px solid #4a7c59;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1.25rem;
        }
        
        .lyn-btn:hover {
            background: linear-gradient(45deg, #6b9d7a, #8abf8a);
            box-shadow: 0 0 10px rgba(74, 124, 89, 0.3);
            transform: translateY(-2px);
        }
        
        .lyn-btn:active {
            transform: translateY(0);
        }
        
        .lyn-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .lyn-scrollbar::-webkit-scrollbar-track {
            background: rgba(210, 230, 210, 0.5);
        }
        
        .lyn-scrollbar::-webkit-scrollbar-thumb {
            background: #4a7c59;
            border-radius: 4px;
        }
        
        .leaf-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-image: url('https://www.freepnglogos.com/uploads/leaf-png/leaf-png-transparent-image-pngpix-0.png');
            background-size: 30px;
            opacity: 0.05;
            pointer-events: none;
            z-index: 0;
        }
        
        .sunlight {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0) 10%
            );
            background-size: 100% 15px;
            animation: sunlight 15s linear infinite;
            pointer-events: none;
            z-index: 10;
        }
        
        @keyframes sunlight {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 0 100%;
            }
        }
        
        .butterfly {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('https://www.freepnglogos.com/uploads/butterfly-png/butterfly-png-transparent-image-pngpix-0.png');
            background-size: contain;
            background-repeat: no-repeat;
            animation: butterflyFly 20s linear infinite;
            opacity: 0.7;
            z-index: 5;
        }
        
        @keyframes butterflyFly {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(200px, 50px) rotate(10deg);
            }
            50% {
                transform: translate(400px, 0) rotate(0deg);
            }
            75% {
                transform: translate(200px, -50px) rotate(-10deg);
            }
            100% {
                transform: translate(0, 0) rotate(0deg);
            }
        }
        
        .lyn-title {
            font-family: 'Playfair Display', serif;
            font-weight: bold;
            color: #4a7c59;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            position: relative;
            display: inline-block;
        }
        
        .lyn-title::before, .lyn-title::after {
            content: 'âœ¿';
            position: absolute;
            color: #e91e63;
            font-size: 1.2em;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .lyn-title::before {
            left: -25px;
        }
        
        .lyn-title::after {
            right: -25px;
        }

        /* Very large chat message font size with white text */
        .chat-message {
            font-size: 2.25rem; /* Approximately 68px */
            line-height: 1.1; /* Tighter line spacing */
            color: white; /* White text color */
        }

        /* Adjust message bubbles for large text */
        .message-bubble {
            max-width: 90%;
            margin-bottom: 1rem; /* Reduced spacing between messages */
        }

        /* Sender name style with reduced spacing */
        .message-sender {
            display: block;
            font-weight: bold;
            color: #4a7c59;
            font-size: 1.5rem;
            margin-bottom: 0.1rem; /* Significantly reduced spacing between username and message */
        }

        /* Darker background for received messages for better contrast */
        .received-message {
            background-color: #2d3748 !important;
        }

        /* System message font size */
        .system-message {
            font-size: 1.5rem; /* Slightly smaller than chat messages */
        }

        /* Input area font size */
        .input-area {
            font-size: 1.25rem;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="sunlight"></div>
    <div class="leaf-animation"></div>
    
    <!-- Login Screen -->
    <div id="loginScreen" class="lyn-box w-full max-w-md p-8 rounded-lg relative overflow-hidden">
        <div class="flower-decoration flower-top-left"></div>
        <div class="flower-decoration flower-top-right"></div>
        <div class="flower-decoration flower-bottom-left"></div>
        <div class="flower-decoration flower-bottom-right"></div>
        
        <div class="relative z-10">
            <h1 class="lyn-title text-3xl md:text-4xl text-center mb-6">LYN</h1>
            
            <div class="mb-6">
                <label for="nickname" class="block text-sm mb-2" style="color: #4a7c59;">ENTER YOUR NAME</label>
                <input type="text" id="nickname" class="lyn-input w-full p-3 rounded" placeholder="Username">
            </div>
            
            <div class="mb-6">
                <label class="block text-sm mb-2" style="color: #4a7c59;">FOLLOW US</label>
                <div class="flex items-center lyn-box p-3" style="background-color: rgba(255, 255, 255, 0.7);">
                    <i class="fas fa-heart text-xl mr-3" style="color: #e91e63;"></i>
                    <span class="flex-1">@exvisuites</span> <!-- Changed Instagram username -->
                    <button id="verifyBtn" class="lyn-btn px-3 py-1 rounded text-xs">
                        VERIFY
                    </button>
                </div>
                <div id="followStatus" class="text-xs mt-2 hidden" style="color: #4a7c59;">
                    <i class="fas fa-check-circle text-green-600 mr-1"></i>
                    <span>FOLLOW VERIFIED</span>
                </div>
            </div>
            
            <button id="joinBtn" disabled class="lyn-btn w-full py-3 rounded-lg flex items-center justify-center opacity-50 cursor-not-allowed">
                <span>ENTER LYN</span>
                <i class="fas fa-heart ml-2"></i>
            </button>
            
            <div class="mt-6 text-xs text-center" style="color: #4a7c59;">
                <p>WELCOME TO OUR LYN COMMUNITY</p>
                <p class="mt-1">CONNECT WITH FRIENDS</p>
            </div>
        </div>
    </div>
    
    <!-- Chat Room -->
    <div id="chatRoom" class="hidden w-full max-w-4xl h-[70vh] lyn-box rounded-lg relative overflow-hidden">
        <div class="flower-decoration flower-top-left"></div>
        <div class="flower-decoration flower-top-right"></div>
        <div class="relative z-10 h-full flex flex-col">
            <!-- Header -->
            <div class="border-b border-green-600 p-3 md:p-4 flex justify-between items-center" style="background-color: rgba(255, 255, 255, 0.8);">
                <div>
                    <h2 class="lyn-title text-lg md:text-xl">LYN</h2>
                    <div class="flex items-center text-[10px] md:text-xs" style="color: #4a7c59;">
                        <div class="w-2 h-2 bg-green-600 rounded-full mr-2"></div>
                        <span id="connectionStatus">CONNECTING...</span>
                    </div>
                </div>
                <div class="text-xs md:text-sm" style="color: #4a7c59;">
                    <span id="userCount">0</span> MEMBERS
                </div>
                <div class="text-xs md:text-sm" style="color: #4a7c59;">
                    <span id="currentUser" style="color: #4a7c59;">GUEST</span>
                </div>
                <button id="startStreamBtn" class="lyn-btn px-2 py-1 rounded text-[10px] md:px-3 md:text-sm mr-2">
                    <i class="fas fa-camera mr-1"></i> <span class="hidden md:inline">SHARE</span>
                </button>
                <button id="clearChatBtn" class="lyn-btn px-2 py-1 rounded text-[10px] md:px-3 md:text-sm mr-2">
                    <i class="fas fa-trash mr-1"></i> <span class="hidden md:inline">CLEAR</span>
                </button>
                <button id="closeChatBtn" class="lyn-btn px-2 py-1 rounded text-[10px] md:px-3 md:text-sm">
                    <i class="fas fa-times mr-1"></i> <span class="hidden md:inline">EXIT</span>
                </button>
            </div>
            
            <!-- Stream Container -->
            <div id="streamContainer" class="hidden p-4 border-b border-green-600" style="background-color: rgba(255, 255, 255, 0.7);">
                <div class="lyn-box p-2">
                    <video id="streamVideo" class="w-full" autoplay playsinline></video>
                    <div class="flex justify-between mt-2">
                        <div class="text-xs" style="color: #4a7c59;">
                            <span id="streamStatus">LIVE STREAM</span>
                        </div>
                        <button id="stopStreamBtn" class="lyn-btn px-2 py-1 rounded text-xs">
                            <i class="fas fa-stop mr-1"></i> STOP
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Messages -->
            <div id="messages" class="flex-1 overflow-y-auto p-4 lyn-scrollbar space-y-4" style="background-color: rgba(255, 255, 255, 0.7);">
                <div class="text-center text-sm system-message" style="color: #4a7c59;">
                    <p>WELCOME TO LYN CHAT</p>
                    <p>CONNECT WITH YOUR COMMUNITY</p>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="border-t border-green-600 p-4 input-area" style="background-color: rgba(255, 255, 255, 0.8);">
                <div class="flex space-x-2">
                    <input type="text" id="messageInput" class="lyn-input flex-1 rounded" placeholder="TYPE YOUR MESSAGE..." disabled>
                    <button id="sendBtn" class="lyn-btn px-4 rounded flex items-center justify-center" disabled>
                        <i class="fas fa-paper-plane mr-2"></i>
                        <span>SEND</span>
                    </button>
                </div>
                <div class="flex justify-between mt-2 text-[10px] md:text-xs" style="color: #4a7c59;">
                    <div>
                        <span id="typingIndicator"></span>
                    </div>
                    <div>
                        <span id="characterCount">0/200</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Connection Error Modal -->
    <div id="errorModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="lyn-box p-6 max-w-md w-full relative">
            <div class="flower-decoration flower-top-left"></div>
            <div class="flower-decoration flower-top-right"></div>
            <div class="relative z-10">
                <h3 class="lyn-font text-xl mb-4" style="color: #e53e3e;">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    CONNECTION ERROR
                </h3>
                <p id="errorMessage" class="mb-4">Failed to connect to LYN chat. Please try again later.</p>
                <div class="flex justify-end">
                    <button id="retryBtn" class="lyn-btn px-4 py-2 rounded">
                        RETRY CONNECTION
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC7zwrxJVZPxEfM9ulVOUJOSCnMjb1kyk0",
            authDomain: "lynchat-f6fbc.firebaseapp.com",
            databaseURL: "https://lynchat-f6fbc-default-rtdb.firebaseio.com",
            projectId: "lynchat-f6fbc",
            storageBucket: "lynchat-f6fbc.appspot.com",
            messagingSenderId: "465251710149",
            appId: "1:465251710149:web:e6243a6ca5de6754c1ecac",
            measurementId: "G-LGDFQ5JK6G"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // DOM Elements
        const clearChatBtn = document.getElementById('clearChatBtn');
        const loginScreen = document.getElementById('loginScreen');
        const startStreamBtn = document.getElementById('startStreamBtn');
        const stopStreamBtn = document.getElementById('stopStreamBtn');
        const streamContainer = document.getElementById('streamContainer');
        const streamVideo = document.getElementById('streamVideo');
        const streamStatus = document.getElementById('streamStatus');
        let mediaStream = null;
        const chatRoom = document.getElementById('chatRoom');
        const nicknameInput = document.getElementById('nickname');
        const verifyBtn = document.getElementById('verifyBtn');
        const followStatus = document.getElementById('followStatus');
        const joinBtn = document.getElementById('joinBtn');
        const messagesContainer = document.getElementById('messages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const currentUser = document.getElementById('currentUser');
        const userCount = document.getElementById('userCount');
        const connectionStatus = document.getElementById('connectionStatus');
        const typingIndicator = document.getElementById('typingIndicator');
        const characterCount = document.getElementById('characterCount');
        const errorModal = document.getElementById('errorModal');
        const errorMessage = document.getElementById('errorMessage');
        const retryBtn = document.getElementById('retryBtn');
        
        // State
        let username = '';
        let isFollowing = false;
        let typingTimeout;
        
        // Follow verification
        verifyBtn.addEventListener('click', () => {
            // Open page in new tab with updated Instagram URL
            window.open('https://www.instagram.com/exvisuites/', '_blank');
            
            // Show verification UI
            verifyBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> VERIFYING...';
            
            // Simulate verification delay
            setTimeout(() => {
                isFollowing = true;
                followStatus.classList.remove('hidden');
                verifyBtn.classList.add('hidden');
                
                // Enable join button if nickname is filled
                if (nicknameInput.value.trim()) {
                    joinBtn.disabled = false;
                    joinBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    joinBtn.innerHTML = '<span>ENTER LYN</span> <i class="fas fa-heart ml-2"></i>';
                }
            }, 2000);
        });
        
        // [Rest of the JavaScript remains the same]
        
        // Add message to chat with white text and tighter spacing
        function addMessage(sender, text, isCurrentUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isCurrentUser ? 'justify-end' : 'justify-start'} message-bubble`;
            
            const bubble = document.createElement('div');
            bubble.className = `max-w-xs md:max-w-md rounded-lg px-4 py-2 chat-message ${
                isCurrentUser ? 'bg-green-600' : 'received-message'
            }`;
            bubble.style.border = '1px solid #4a7c59';
            
            const senderSpan = document.createElement('span');
            senderSpan.className = 'message-sender';
            senderSpan.textContent = `${sender}`;
            
            const textDiv = document.createElement('div');
            textDiv.textContent = text;
            
            bubble.appendChild(senderSpan);
            bubble.appendChild(textDiv);
            messageDiv.appendChild(bubble);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // [Rest of the JavaScript remains the same]
    </script>
</body>
</html>
